var _hxdialog_count=0,_hxdialog_expando=new Date-0,_hxdialog_isIE6=!("minWidth"in $("html")[0].style),HXDialogMask='<div class="HXDialogMask"></div>',HXDialogDivCss='<style type="text/css">.HXDialogMask{display:none;top:0;left:0;filter:Alpha(Opacity=30);opacity:0.3;background-color:#000000;z-index:998;}.HXDialogPop{display:none;z-index:999;border-radius:6px;border:1px solid #999999;background:#f1f1f1;}.HXDialog{background:#f1f1f1;border-radius:6px;}.HXDialogTitleBar{position:relative;border-bottom:1px solid #E5E5E5;}.HXDialogTitle{color:#666;font-family:微软雅黑;font-size:20px;font-weight:bold;padding:10px;display:block;overflow:hidden;}.HXDialogTitleBtn{right:5px;top:3px;cursor:pointer;position:absolute;}.HXDialogColose{color:#000000;font-size:22px;width:22px;text-decoration:none;display:inline-block;font-family:tahoma,arial,\u5b8b\u4f53,sans-serif;position:relative;text-align:center;opacity:0.2;filter:alpha(opacity=20)}.HXDialogColose:hover{color:#000000;text-decoration:none;cursor:pointer;outline:0;opacity:0.5;filter:alpha(opacity=50);}.HXDialogCont{padding:15px;font:12px tahoma,arial,\u5b8b\u4f53,sans-serif;}.HXDialogBtnBar{padding: 4px 8px;text-align: right;}.HXDialogBtn{display: inline-block;padding: 6px 12px;margin-bottom: 0;font-size: 14px;font-weight: normal;line-height: 1.428571429;text-align: center;white-space: nowrap;vertical-align: middle;cursor: pointer;background-image: none;border: 1px solid transparent;border-radius: 4px;}.HXDialogBtn:hover,.HXDialogBtn:focus {color: #333333;text-decoration: none;}.HXDialogBtn-default{color: #333333;background-color: #ffffff;border-color: #cccccc;}.HXDialogBtn-default:hover,.HXDialogBtn-default:focus,.HXDialogBtn-default:active,.HXDialogBtn-default.active{color: #333333;background-color: #ebebeb;border-color: #adadad;}.HXDialogBtn-success{color: #ffffff;background-color: #5cb85c;border-color: #4cae4c;}.HXDialogBtn-success:hover,.HXDialogBtn-success:focus,.HXDialogBtn-success:active,.HXDialogBtn-success.active{color: #ffffff;background-color: #47a447;border-color: #398439;}</style>',HXDialogDivTpl='<div class="HXDialogPop"><div class="HXDialog"><div class="HXDialogTitleBar"><div class="HXDialogTitle"></div><div class="HXDialogTitleBtn"><a class="HXDialogColose" href="javascript:void(0);" title="\u5173\u95ed" data-btnid="close">\xd7</a></div></div><div class="HXDialogCont"></div><div class="HXDialogBtnBar"></div></div></div>',HXDialogDefaultSetting={title:"\u63d0\u793a",content:'<div class="HXDialogLoad"><span><img src="http://www.houxue.com/images/loading.gif" style="vertical-align:top;"> 请等待...</span></div>',contentAjax:{type:"get",url:"",data:"",onsuccess:""},width:"auto",height:"auto",left:"50%",top:"30%",mask:!0,fixed:!1,esc:!0,show:!0,time:0,zIndex:999,drag:!0},HXDialogItem=function(a){this.initialize(a)};HXDialogItem.prototype={initialize:function(a){return _hxdialog_count++,this.options=a,this._mask(),this.DialogDiv=$(HXDialogDivTpl),this.DialogDiv.appendTo("body").css("z-index",HXDialog.defaultSetting.zIndex+_hxdialog_count),this.title(a.title).content(a.content).contentajax(a.contentAjax).button().time(a.time).size(a.width,a.height).position(a.left,a.top),this._addEvent(),this},show:function(){return this.options.mask&&$(".HXDialogMask").show(),this.DialogDiv.fadeIn(),this},close:function(){return _hxdialog_count--,_hxdialog_count=_hxdialog_count>0?_hxdialog_count:0,this.options.mask&&1>_hxdialog_count&&$(".HXDialogMask").hide(),this.DialogDiv.remove(),HXDialog.list[this.options.id]=void 0,clearInterval(this.timer),this},time:function(a){var b=this;if(a){var c=function(){b.title(a+"\u79d2\u540e\u5173\u95ed"),!a&&b.close(),a--};this.timer=setInterval(c,1e3),c()}return this},title:function(a){return void 0===a?this:a===!1?(this.DialogDiv.find(".HXDialogTitleBar").hide(),this):(this.DialogDiv.find(".HXDialogTitle").html("&nbsp;"+a),this)},content:function(a){return this.DialogDiv.find(".HXDialogCont").html(a),this},contentajax:function(a){if(a.url){var b=this;currentAjax=$.ajax({type:a.type,url:a.url,data:a.data,cache:!1,beforeSend:function(){},success:function(c){b.content(c);var d=a.onsuccess;"function"!=typeof d||d.call(this)!==!1?"":this},timeout:3e4,error:function(){currentAjax.abort(),alert("\u7f51\u7edc\u8d85\u65f6")}})}return this},size:function(a,b){return this.DialogDiv.css({width:a+"px",height:b+"px"}),this},button:function(){var a=this,b=this.options.button,c="";return a.callbacks={},$.isArray(b)&&($.each(b,function(b,d){d.id=d.id||d.name,a.callbacks[d.id]=d.callback,c+='<button type="button" data-btnid="'+d.id+'" class="HXDialogBtn '+(d.focus?"HXDialogBtn-success":"HXDialogBtn-default")+' ">'+d.name+"</button>&nbsp;"}),this.DialogDiv.find(".HXDialogBtnBar").html(c)),this},focus:function(){return HXDialog.defaultSetting.zIndex++,this.DialogDiv.css("z-index",HXDialog.defaultSetting.zIndex),this},shake:function(){box_left=this.DialogDiv.offset().left;for(var a=1;4>=a;a++)this.DialogDiv.animate({left:box_left-(40-10*a)},50).animate({left:box_left+2*(40-10*a)},50);return this},position:function(a,b){var c=_hxdialog_isIE6?!1:this.options.fixed,d=_hxdialog_isIE6&&this.options.fixed,e=$(window).scrollLeft(),f=$(window).scrollTop(),g=$(window).width(),h=$(window).height(),i=c?0:e,j=c?0:f,k=this.DialogDiv.width(),l=this.DialogDiv.height();return(a||0===a)&&(this._left=a,a=this._toNumber(a,g-k),"number"==typeof a&&(a=d?a+=e:a+i,a=Math.max(a,i)),this.DialogDiv.css({left:a+"px"})),(b||0===b)&&(this._top=b,b=this._toNumber(b,h-l),"number"==typeof b&&(b=d?b+=f:b+j,b=Math.max(b,j)),this.DialogDiv.css({top:b+"px"})),void 0!==a&&void 0!==b&&this._autoPositionType(),this},_toNumber:function(a,b){return isNaN(a)&&(a=-1!==a.indexOf("%")?parseInt(b*a.split("%")[0]/100):parseInt(a)),a},_autoPositionType:function(){this[this.options.fixed?"_setFixed":"_setAbsolute"]()},_setFixed:function(){_hxdialog_isIE6?this._setAbsolute():this.DialogDiv.css({position:"fixed"})},_setAbsolute:function(){this.DialogDiv.css({position:"absolute"})},_mask:function(){$(".HXDialogMask").length<=0&&$(HXDialogMask).appendTo("body"),_hxdialog_isIE6?$(".HXDialogMask").css({position:"absolute",width:$(window).width(),height:$(document).height()}):$(".HXDialogMask").css({position:"fixed",width:$(window).width(),height:$(window).height()})},_trigger:function(a){var b=this.callbacks[a];return"function"!=typeof b||b.call(this)!==!1?this.close():this},_addEvent:function(){var a=this;if(this.options.show&&this.show(),this.DialogDiv.click(function(b){a.focus(),$(b.target).data("btnid")&&a._trigger($(b.target).data("btnid"))}),this.options.esc&&$(window).keydown(function(b){27==b.keyCode&&(a.close(),b&&b.preventDefault?b.preventDefault():window.event.returnValue=!1)}),this.options.drag){var d,e,b=this.DialogDiv,c=!1;b.find(".HXDialogTitleBar").css("cursor","move").mousedown(function(f){c=!0,a.focus(),b.css("opacity",.8),d=f.clientX-parseInt(b.css("left")),e=f.clientY-parseInt(b.css("top")),b.mousemove(function(f){c&&(window.getSelection?window.getSelection().removeAllRanges():document.selection.empty(),document.body.setCapture&&b[0].setCapture(),win=$(window),l=f.clientX-d<0?0:f.clientX-d>win.width()-b.width()-2?win.width()-b.width()-2:f.clientX-d,t=f.clientY-e<0?0:a.options.fixed&&!_hxdialog_isIE6?f.clientY-e>win.height()-b.height()-2?win.height()-b.height()-2:f.clientY-e:f.clientY-e>win.height()+win.scrollTop()-b.height()-2?win.height()+win.scrollTop()-b.height()-2:f.clientY-e,b.css({left:l,top:t}))}).mouseup(function(){c=!1,document.body.releaseCapture&&b[0].releaseCapture(),b.css("opacity",1)})})}}};var HXDialog=function(a){return a=a||{},a=$.extend(!0,{},HXDialog.defaultSetting,a),a.id=a.id||_hxdialog_expando+_hxdialog_count,api=HXDialog.list[a.id],api?api.focus():HXDialog.list[a.id]=new HXDialogItem(a)};HXDialog.list={},HXDialog.defaultSetting=HXDialogDefaultSetting,document.write(HXDialogDivCss);